<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="format-detection" content="telephone=no, address=no, email=no" />
<title>DB손해보험</title>
<script src="https://code.jquery.com/jquery-latest.min.js"></script>
</head>
<body>
<script type="text/javascript">
		

//ajax


$(document).ready(function() {
	var varUA = navigator.userAgent.toLowerCase();
	console.log("varUA : "+varUA); 
	document.getElementById('agent').innerHTML = varUA;

	//고객의 현재위치 가져오기
	//custGPS();
});
	
function custGPS(){
		if (navigator.geolocation) {
			console.log("navigator.geolocation");
			//브라우저가 geolocatioin을 지원하는지 확인한 후
			navigator.geolocation.getCurrentPosition(successCallback, errorCallback);
		}
}
	
function successCallback(wp_position) {
	custLat = wp_position.coords.latitude;
	console.log("custLat : "+custLat);
	custLng = wp_position.coords.latitude;
	console.log("custLng : "+custLng);
	
	document.getElementById('posi').innerHTML = custLat+","+custLng;
}

function errorCallback(error) {
	switch(error.code) {
		case error.PERMISSION_DENIED: console.log("PERMISSION_DENIED(값:1) = 사용자가 위치 정보 접근을 허용하도록 브라우저 권한 설정(https)");
		break;
		case error.POSITION_UNAVAILABLE: console.log("POSITION_UNAVAILABLE(값:2) = 사용자가 위치 정보 서비스를 사용할 수 있도록 GPS 설정");
		break;
		case error.TIMEOUT: console.log("TIMEOUT(값:3) = timeout 값 수정 or 사용자가 재시도할 수 있는 옵션 제공");
		break;
		case error.UNKNOWN_ERROR: console.log("UNKNOWN_ERROR = 정의되지 않은 오류. 디버깅 필요")
	}
	if (confirm("위치 권한이 거부되었습니다. 페이지를 새로고침하여 다시 요청하시겠습니까?")) {
    	location.reload();
    }
	alert("error.code : "+error.code);
}


function custPotision(){
	console.log("custPosInit");
	
	var hospLatitude = 66.77;
	
	var hospLongitude = 88.88;
	
	var param = "hospLatitude="+hospLatitude
	+ "&hospLongitude="+hospLongitude; 
	console.log("param : "+param);
	
	$.ajax({
		type: 'GET',
		url: '/mobileacc/pytGuGps.do?',
		data: {
			hospLatitude,
			hospLongitude
		},
		dataType: 'text',
		success: function(data){
			alert("ajax 성공"+data);
		},
		error: function(){
			alert("ajax 실패");
		}
	})
	
	console.log("form data : "+$("#frm"));
	$("#frm").submit();	 
}
	
	
</script>
<form>
	<div id="wrap">
	<div id="container">
		<div id="content">
			<header class="header_t2">
				<h1 class="logo">
					<a href="#none" class="link_db"><img src="/mobileacc/img/pytGu/img_logodb.png" alt="DB손해보험"></a>
				</h1>
				<div class="wrap_tit_t3">
					<h2 class="tit">자동차사고<br>본인확인 지불보증</h2>
				</div>
			</header><!-- //header -->
			<hr class="hr_line" aria-hidden="true">
			
			<section class="content_t2">
				<form id="frm" method="post" action="<c:url value='/'/>">
				<h3 class="tit_h3 type3"><span class="bold">신속한 지불보증 처리를 위해 내원여부와 사고정보를 확인합니다.</span><br><br>예상 소요시간은 약 30초 내외 예상됩니다.</h3>
				<br><br>
				<span>1. user-agent : </span><span id="agent"></span>
				<br><br>
				<span>2. cust-gps : </span><span id="posi"></span>

				<div class="fixed_bottom_button t1">
					<ul class="grid s1">
						<li><a href="#" class="btn bs1 bsr1 bc1" role="button" onclick="javascript:custGPS();">진행하기</a></li>
					</ul>
				</div>
			</section><!-- //section -->		

		</div><!-- //content -->
	</div><!-- //container -->
</div>
</form>
</body>
</html>
